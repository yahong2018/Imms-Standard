[Imms.Core.Logger--2019/11/23 05:38:12-Debug]:收到ERP工务移库数据-->
[Imms.Core.Logger--2019/11/23 05:38:17-Debug]:{
  "kanbanNo": "THR001",
  "productionCode": "A04",
  "productionName": "A_THR组装",
  "storeNo": "THR",
  "storeName": "THR组合",
  "operatorCode": "GK001",
  "operatorName": "徐斯珍",
  "qty": 100,
  "movingTime": "2019/11/23 04:50"
}
[Imms.Core.Logger--2019/11/23 05:38:28-Debug]:开始工务移库...
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'MySql.Data.EntityFrameworkCore.Infraestructure.MySQLOptionsExtension', configuration added for 'Core:UseLoggerFactory', configuration added for 'Core:UseMemoryCache', configuration added for 'Core:EnableSensitiveDataLogging', configuration added for 'Core:EnableDetailedErrors', configuration added for 'Core:ConfigureWarnings'.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'code_type' on entity type 'SimpleCode' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'org_type' on entity type 'WorkOrganizationUnit' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'CreateByCode' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'CreateById' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'CreateByName' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'CreateTime' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'OptFlag' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'UpdateByCode' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'UpdateById' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'UpdateByName' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:The property 'UpdateTime' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:38:35-Warning]:The 'bool' property 'IsOnline' on entity type 'SystemUser' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used for inserts when the property value is 'null'.
[Imms.Core.Logger--2019/11/23 05:38:35-Information]:Entity Framework Core 2.2.6-servicing-10079 initialized 'ImmsDbContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:Compiling query model: 
'(from RfidCard x in DbSet<RfidCard>
where [x].KanbanNo == __kanbanNo_0 && [x].ProductionCode == __materialCode_1
select [x]).FirstOrDefault()'
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:Optimized query model: 
'(from RfidCard x in DbSet<RfidCard>
where [x].KanbanNo == __kanbanNo_0 && [x].ProductionCode == __materialCode_1
select [x]).FirstOrDefault()'
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:(QueryContext queryContext) => IEnumerable<RfidCard> _InterceptExceptions(
|__ source: IEnumerable<RfidCard> _TrackEntities(
|   |__ results: IEnumerable<RfidCard> _ToSequence(() => RfidCard FirstOrDefault(IEnumerable<RfidCard> _ShapedQuery(
|   |   |__ queryContext: queryContext, 
|   |   |__ shaperCommandContext: SelectExpression: 
|   |   |       SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
|   |   |       FROM `rfid_card` AS `x`
|   |   |       WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
|   |   |       LIMIT 1, 
|   |   |__ shaper: (MaterializationContext materializationContext) => 
|   |       {
|   |           instance = new RfidCard()
|   |           instance.<RecordId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 0, RfidCard.RecordId)
|   |           instance.<CardStatus>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 1, RfidCard.CardStatus)
|   |           instance.<CardType>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 2, RfidCard.CardType)
|   |           instance.<CreateByCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 3, RfidCard.CreateByCode)
|   |           instance.<CreateById>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 4, RfidCard.CreateById)
|   |           instance.<CreateByName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 5, RfidCard.CreateByName)
|   |           instance.<CreateTime>k__BackingField = DateTime TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 6, RfidCard.CreateTime)
|   |           instance.<IssueQty>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 7, RfidCard.IssueQty)
|   |           instance.<KanbanNo>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 8, RfidCard.KanbanNo)
|   |           instance.<OptFlag>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 9, RfidCard.OptFlag)
|   |           instance.<ProductionCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 10, RfidCard.ProductionCode)
|   |           instance.<ProductionId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 11, RfidCard.ProductionId)
|   |           instance.<ProductionName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 12, RfidCard.ProductionName)
|   |           instance.<RfidNo>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 13, RfidCard.RfidNo)
|   |           instance.<StockQty>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 14, RfidCard.StockQty)
|   |           instance.<UpdateByCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 15, RfidCard.UpdateByCode)
|   |           instance.<UpdateById>k__BackingField = Nullable<long> TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 16, RfidCard.UpdateById)
|   |           instance.<UpdateByName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 17, RfidCard.UpdateByName)
|   |           instance.<UpdateTime>k__BackingField = Nullable<DateTime> TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 18, RfidCard.UpdateTime)
|   |           instance.<WorkshopCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 19, RfidCard.WorkshopCode)
|   |           instance.<WorkshopId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 20, RfidCard.WorkshopId)
|   |           instance.<WorkshopName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 21, RfidCard.WorkshopName)
|   |           return instance
|   |       }))), 
|   |__ queryContext: queryContext, 
|   |__ entityTrackingInfos: { itemType: RfidCard }, 
|   |__ entityAccessors: List<Func<RfidCard, object>> 
|       { 
|           Func<RfidCard, RfidCard>, 
|       }), 
|__ contextType: Imms.Data.ImmsDbContext, 
|__ logger: DiagnosticsLogger<Query>, 
|__ queryContext: queryContext)
[Imms.Core.Logger--2019/11/23 05:38:35-Debug]:Opening connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:Opened connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:Executing DbCommand [Parameters=[@__kanbanNo_0='?' (Size = -1), @__materialCode_1='?' (Size = -1)], CommandType='Text', CommandTimeout='30']
SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
FROM `rfid_card` AS `x`
WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
LIMIT 1
[Imms.Core.Logger--2019/11/23 05:38:36-Information]:Executed DbCommand (15ms) [Parameters=[@__kanbanNo_0='?' (Size = -1), @__materialCode_1='?' (Size = -1)], CommandType='Text', CommandTimeout='30']
SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
FROM `rfid_card` AS `x`
WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
LIMIT 1
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:A data reader was disposed.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:Closing connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:Closed connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:Context 'ImmsDbContext' started tracking 'RfidCard' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
[Imms.Core.Logger--2019/11/23 05:38:36-Debug]:'ImmsDbContext' disposed.
[Imms.Core.Logger--2019/11/23 05:38:38-Error]:处理ERP工务报工数据失败:看板编号(KanbanNo)='THR001'的看板还没有报工，不可以执行移库动作！
[Imms.Core.Logger--2019/11/23 05:38:38-Debug]:   at Imms.WebManager.Controllers.ProductionOrderProgressController.ReportInstoreByERP(InstoreItem instoreItem) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\Controllers\MFCController.cs:line 209
[Imms.Core.Logger--2019/11/23 05:38:40-Error]:{
  "success": false,
  "data": {
    "exceptionCode": 5,
    "requestUrl": "/api/imms/mfc/productionOrderProgress/reportInstroeByErp",
    "message": "看板编号(KanbanNo)='THR001'的看板还没有报工，不可以执行移库动作！"
  }
}
[Imms.Core.Logger--2019/11/23 05:38:40-Error]:   at Imms.WebManager.Controllers.ProductionOrderProgressController.ReportInstoreByERP(InstoreItem instoreItem) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\Controllers\MFCController.cs:line 209
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Imms.WebManager.ErrorHandlingMiddleware.Invoke(HttpContext context) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\ErrorHandlingMiddleware.cs:line 24
[Imms.Core.Logger--2019/11/23 05:45:12-Debug]:收到ERP工务移库数据-->
[Imms.Core.Logger--2019/11/23 05:45:18-Debug]:{
  "kanbanNo": "THR001",
  "productionCode": "A04",
  "productionName": "A_THR组装",
  "storeNo": "THR",
  "storeName": "THR组合",
  "operatorCode": "GK001",
  "operatorName": "徐斯珍",
  "qty": 100,
  "movingTime": "2019/11/23 04:50"
}
[Imms.Core.Logger--2019/11/23 05:45:18-Debug]:开始工务移库...
[Imms.Core.Logger--2019/11/23 05:45:18-Debug]:An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'MySql.Data.EntityFrameworkCore.Infraestructure.MySQLOptionsExtension', configuration added for 'Core:UseLoggerFactory', configuration added for 'Core:UseMemoryCache', configuration added for 'Core:EnableSensitiveDataLogging', configuration added for 'Core:EnableDetailedErrors', configuration added for 'Core:ConfigureWarnings'.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The foreign key properties haven't been configured by convention because the best match {'RecordId' : int} are incompatible with the current principal key {'RecordId' : long}. This message can be disregarded if explicit configuration has been specified.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'code_type' on entity type 'SimpleCode' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'org_type' on entity type 'WorkOrganizationUnit' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'CreateByCode' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'CreateById' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'CreateByName' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'CreateTime' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'OptFlag' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'UpdateByCode' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'UpdateById' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'UpdateByName' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:The property 'UpdateTime' on entity type 'WorkstationLogin' was created in shadow state because there are no eligible CLR members with a matching name.
[Imms.Core.Logger--2019/11/23 05:45:19-Warning]:The 'bool' property 'IsOnline' on entity type 'SystemUser' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used for inserts when the property value is 'null'.
[Imms.Core.Logger--2019/11/23 05:45:19-Information]:Entity Framework Core 2.2.6-servicing-10079 initialized 'ImmsDbContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:Compiling query model: 
'(from RfidCard x in DbSet<RfidCard>
where [x].KanbanNo == __kanbanNo_0 && [x].ProductionCode == __materialCode_1
select [x]).FirstOrDefault()'
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:Optimized query model: 
'(from RfidCard x in DbSet<RfidCard>
where [x].KanbanNo == __kanbanNo_0 && [x].ProductionCode == __materialCode_1
select [x]).FirstOrDefault()'
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:(QueryContext queryContext) => IEnumerable<RfidCard> _InterceptExceptions(
|__ source: IEnumerable<RfidCard> _TrackEntities(
|   |__ results: IEnumerable<RfidCard> _ToSequence(() => RfidCard FirstOrDefault(IEnumerable<RfidCard> _ShapedQuery(
|   |   |__ queryContext: queryContext, 
|   |   |__ shaperCommandContext: SelectExpression: 
|   |   |       SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
|   |   |       FROM `rfid_card` AS `x`
|   |   |       WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
|   |   |       LIMIT 1, 
|   |   |__ shaper: (MaterializationContext materializationContext) => 
|   |       {
|   |           instance = new RfidCard()
|   |           instance.<RecordId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 0, RfidCard.RecordId)
|   |           instance.<CardStatus>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 1, RfidCard.CardStatus)
|   |           instance.<CardType>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 2, RfidCard.CardType)
|   |           instance.<CreateByCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 3, RfidCard.CreateByCode)
|   |           instance.<CreateById>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 4, RfidCard.CreateById)
|   |           instance.<CreateByName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 5, RfidCard.CreateByName)
|   |           instance.<CreateTime>k__BackingField = DateTime TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 6, RfidCard.CreateTime)
|   |           instance.<IssueQty>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 7, RfidCard.IssueQty)
|   |           instance.<KanbanNo>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 8, RfidCard.KanbanNo)
|   |           instance.<OptFlag>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 9, RfidCard.OptFlag)
|   |           instance.<ProductionCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 10, RfidCard.ProductionCode)
|   |           instance.<ProductionId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 11, RfidCard.ProductionId)
|   |           instance.<ProductionName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 12, RfidCard.ProductionName)
|   |           instance.<RfidNo>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 13, RfidCard.RfidNo)
|   |           instance.<StockQty>k__BackingField = int TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 14, RfidCard.StockQty)
|   |           instance.<UpdateByCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 15, RfidCard.UpdateByCode)
|   |           instance.<UpdateById>k__BackingField = Nullable<long> TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 16, RfidCard.UpdateById)
|   |           instance.<UpdateByName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 17, RfidCard.UpdateByName)
|   |           instance.<UpdateTime>k__BackingField = Nullable<DateTime> TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 18, RfidCard.UpdateTime)
|   |           instance.<WorkshopCode>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 19, RfidCard.WorkshopCode)
|   |           instance.<WorkshopId>k__BackingField = long TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 20, RfidCard.WorkshopId)
|   |           instance.<WorkshopName>k__BackingField = string TryReadValue(ValueBuffer materializationContext.get_ValueBuffer(), 21, RfidCard.WorkshopName)
|   |           return instance
|   |       }))), 
|   |__ queryContext: queryContext, 
|   |__ entityTrackingInfos: { itemType: RfidCard }, 
|   |__ entityAccessors: List<Func<RfidCard, object>> 
|       { 
|           Func<RfidCard, RfidCard>, 
|       }), 
|__ contextType: Imms.Data.ImmsDbContext, 
|__ logger: DiagnosticsLogger<Query>, 
|__ queryContext: queryContext)
[Imms.Core.Logger--2019/11/23 05:45:19-Debug]:Opening connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:Opened connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:Executing DbCommand [Parameters=[@__kanbanNo_0='?' (Size = -1), @__materialCode_1='?' (Size = -1)], CommandType='Text', CommandTimeout='30']
SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
FROM `rfid_card` AS `x`
WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
LIMIT 1
[Imms.Core.Logger--2019/11/23 05:45:20-Information]:Executed DbCommand (18ms) [Parameters=[@__kanbanNo_0='?' (Size = -1), @__materialCode_1='?' (Size = -1)], CommandType='Text', CommandTimeout='30']
SELECT `x`.`record_id`, `x`.`card_status`, `x`.`card_type`, `x`.`create_by_code`, `x`.`create_by_id`, `x`.`create_by_name`, `x`.`create_time`, `x`.`issue_qty`, `x`.`kanban_no`, `x`.`opt_flag`, `x`.`production_code`, `x`.`production_id`, `x`.`production_name`, `x`.`rfid_no`, `x`.`stock_qty`, `x`.`update_by_code`, `x`.`update_by_id`, `x`.`update_by_name`, `x`.`update_time`, `x`.`workshop_code`, `x`.`workshop_id`, `x`.`workshop_name`
FROM `rfid_card` AS `x`
WHERE (`x`.`kanban_no` = @__kanbanNo_0) AND (`x`.`production_code` = @__materialCode_1)
LIMIT 1
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:A data reader was disposed.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:Closing connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:Closed connection to database 'data_gather' on server 'localhost'.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:Context 'ImmsDbContext' started tracking 'RfidCard' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:'ImmsDbContext' disposed.
[Imms.Core.Logger--2019/11/23 05:45:20-Error]:处理ERP工务报工数据失败:看板编号(KanbanNo)='THR001'的看板还没有报工，不可以执行移库动作！
[Imms.Core.Logger--2019/11/23 05:45:20-Debug]:   at Imms.WebManager.Controllers.ProductionOrderProgressController.ReportInstoreByERP(InstoreItem instoreItem) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\Controllers\MFCController.cs:line 209
[Imms.Core.Logger--2019/11/23 05:45:21-Error]:{
  "success": false,
  "data": {
    "exceptionCode": 5,
    "requestUrl": "/api/imms/mfc/productionOrderProgress/reportInstroeByErp",
    "message": "看板编号(KanbanNo)='THR001'的看板还没有报工，不可以执行移库动作！"
  }
}
[Imms.Core.Logger--2019/11/23 05:45:21-Error]:   at Imms.WebManager.Controllers.ProductionOrderProgressController.ReportInstoreByERP(InstoreItem instoreItem) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\Controllers\MFCController.cs:line 209
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Imms.WebManager.ErrorHandlingMiddleware.Invoke(HttpContext context) in E:\01-Projects\Imms\01-Standard\Imms-Standard\Imms\WebManager\ErrorHandlingMiddleware.cs:line 24
